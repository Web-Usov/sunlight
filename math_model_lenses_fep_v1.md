# Математическая модель системы линз и фотоэлектрической панели для расчета выходной мощности в зависимости от угла падения солнечного излучения

## 1. Общее описание системы

Система состоит из:
- **K линз** с известными показателями преломления, геометрическими параметрами и фокусными расстояниями
- **Фотоэлектрической панели (ФЭП)** с заданным постоянным КПД

Задача модели состоит в расчете мощности выходного излучения, достигающего ФЭП, как функции угла падения солнечного излучения \(\alpha\), с учетом преломления в каждой линзе, оптических потерь и реального угла падения на ФЭП.

## 2. Математическое описание преломления в системе линз

### 2.1 Закон Снеллиуса

Для каждой поверхности раздела двух оптических сред действует закон Снеллиуса:

\[n_1 \sin\theta_1 = n_2 \sin\theta_2\]

где:
- \(n_1\) — показатель преломления первой среды
- \(n_2\) — показатель преломления второй среды
- \(\theta_1\) — угол падения (угол между падающим лучом и нормалью к поверхности)
- \(\theta_2\) — угол преломления

### 2.2 Трассировка лучей через систему линз

Для системы из K линз необходимо последовательно применить закон Снеллиуса на каждой поверхности раздела и учитать влияние кривизны поверхностей линз.

**Входная поверхность первой линзы (воздух → материал линзы):**

Солнечное излучение падает под углом \(\alpha\) к нормали поверхности. Угол падения на первую линзу:

\[\theta_{1,0} = \alpha\]

После преломления на первой поверхности:

\[\sin(\alpha) = n_{lens,1} \sin(\theta_{1,1})\]

где \(n_{lens,1}\) — показатель преломления первой линзы.

**Общее правило для преломления на каждой поверхности:**

Для каждой поверхности раздела с показателями преломления \(n_1\) и \(n_2\):

\[n_1 \sin(\theta_{in}) = n_2 \sin(\theta_{out})\]

**Направление луча внутри однородной линзы:**

Между двумя поверхностями линзы (в однородном материале) луч распространяется прямолинейно. Угол распространения не изменяется.

**Воздействие кривизны поверхности линзы:**

При преломлении на изогнутой поверхности линзы нормаль к поверхности ориентирована в направлении радиуса кривизны. Для сферической поверхности радиуса \(R\):
- Нормаль в точке падения луча зависит от положения точки на поверхности
- Угол падения \(\theta_1\) рассчитывается между падающим лучом и этой нормалью

### 2.3 Оптическая степень линзы и влияние на направление луча

Линза характеризуется оптической силой (диоптриями):

\[D = \frac{1}{f} = (n_{lens} - 1)\left(\frac{1}{R_1} - \frac{1}{R_2}\right)\]

где:
- \(f\) — фокусное расстояние линзы
- \(R_1\) — радиус кривизны первой поверхности (положительный для собирающей линзы)
- \(R_2\) — радиус кривизны второй поверхности (отрицательный для собирающей линзы)

**Собирающая линза** (\(D > 0\), \(f > 0\)):
- Изменяет направление лучей, направляя их к фокальной точке
- Лучи, падающие параллельно оптической оси, сходятся в фокусе
- Лучи, падающие под углом к оси, изменяют свой угол в сторону оси

**Рассеивающая линза** (\(D < 0\), \(f < 0\)):
- Раздвигает лучи, отклоняя их от фокальной точки
- Лучи, падающие параллельно оптической оси, кажутся исходящими из фокуса
- Лучи, падающие под углом к оси, изменяют свой угол в сторону, противоположную оси

### 2.4 Угол преломления луча в линзе (матричный метод)

Для линзы с известным фокусным расстоянием \(f\) и входящим лучом под углом \(\theta_{in}\) к оптической оси, угол выходящего луча \(\theta_{out}\) может быть найден через матричное описание оптической системы.

Для тонкой линзы матрица ABCD (система Гаусса):

\[\begin{pmatrix} 1 & 0 \\ -1/f & 1 \end{pmatrix}\]

Луч представляется вектором \(\begin{pmatrix} y \\ \theta \end{pmatrix}\), где \(y\) — положение луча, \(\theta\) — угол к оптической оси.

После прохождения через тонкую линзу:
\[y_{out} = y_{in}\]
\[\theta_{out} = \theta_{in} - \frac{y_{in}}{f}\]

Однако, для более точного расчета, необходимо использовать полную матрицу системы, учитывающую расстояния между линзами.

**Для системы из нескольких линз:**

Полная матрица системы является произведением матриц отдельных линз и промежуточных пространств:

\[M_{total} = M_K \cdot d_K \cdot M_{K-1} \cdot d_{K-1} \cdot \ldots \cdot M_1\]

где \(M_i\) — матрица i-й линзы, \(d_i\) — матрица распространения между линзами.

### 2.5 Определение угла падения на ФЭП

Угол падения на ФЭП \(\beta\) определяется направлением луча после прохождения через всю систему линз. Это **не равно** исходному углу \(\alpha\).

Для луча, падающего на оптическую систему под углом \(\alpha\):

\[\beta = f(\alpha, f_1, f_2, \ldots, f_K, d_1, d_2, \ldots, d_{K-1})\]

где:
- \(f_i\) — фокусное расстояние i-й линзы
- \(d_i\) — расстояние между i-й и (i+1)-й линзами
- \(\beta\) — результирующий угол падения на ФЭП

Эта функция зависит от всей геометрии и оптических параметров системы.

### 2.6 Случаи связи между \(\alpha\) и \(\beta\)

**Случай 1: Система линз с фокусом на ФЭП**

Если ФЭП расположена в фокальной плоскости собирающей системы, то параллельные лучи (\(\alpha = 0°\)) концентрируются в одной точке, и \(\beta\) становится функцией радиального положения точки попадания луча.

**Случай 2: Параллельный пучок на входе и выходе**

Если система линз составлена таким образом, что параллельный пучок на входе остается параллельным на выходе (телескопическая система), то изменение углов минимально, и \(\beta \approx \alpha\).

**Случай 3: Общая система линз**

Для произвольной системы линз угол преломления определяется через матричное описание:

\[\theta_{out} = A \cdot y_{in} + B \cdot \theta_{in}\]

где \(A, B\) — элементы матрицы ABCD системы.

## 3. Расчет интенсивности излучения после системы линз

### 3.1 Исходная интенсивность солнечного излучения

Интенсивность солнечного излучения на входе системы (на высоте спутника):

\[I_0 = I_{solar} = 1361 \text{ Вт/м}^2\]

(солнечная постоянная вне атмосферы для спутниковых систем)

### 3.2 Интенсивность после каждой линзы

Интенсивность после прохождения через k-ю поверхность раздела:

\[I_k = I_{k-1} \cdot T_k(\theta_{k-1})\]

где \(T_k\) — коэффициент пропускания k-й поверхности, зависящий от угла падения на эту поверхность.

**Для системы из K линз (2K поверхностей):**

\[I_{optical} = I_0 \prod_{k=1}^{2K} T_k(\theta_k)\]

где \(\theta_k\) — угол падения на k-ю поверхность, определяемый рекурсивно через закон Снеллиуса и геометрию линз.

### 3.3 Учет изменения площади излучения

При прохождении через оптическую систему с коэффициентом концентрации \(M\) (или рассеяния) площадь пучка может измениться. Интенсивность в фокальной плоскости или на входе ФЭП:

\[I_{FEP,optical} = I_{optical} \cdot M\]

Для параллельного пучка (отсутствие концентрации): \(M = 1\).

## 4. Закон косинусов для фотоэлектрической панели

### 4.1 Эффективная интенсивность на ФЭП

После прохождения через оптическую систему излучение падает на ФЭП под углом \(\beta\), который определяется преломлением в линзах и зависит как от параметров системы, так и от исходного угла падения \(\alpha\).

**Интенсивность, перпендикулярная поверхности ФЭП:**

Падающая интенсивность \(I_{FEP,optical}\) распределяется по поверхности панели. При падении под углом \(\beta\) к нормали, интенсивность, перпендикулярная поверхности, равна:

\[I_{effective} = I_{FEP,optical} \cdot \cos(\beta(\alpha))\]

### 4.2 Эффективная площадь ФЭП

Эффективная площадь, воспринимающая излучение при падении под углом \(\beta\):

\[A_{eff}(\alpha) = A_{FEP} \cdot \cos(\beta(\alpha))\]

где \(A_{FEP}\) — полная площадь панели.

Этот результат следует из геометрии: если луч падает под углом \(\beta\) к нормали, то проекция площади на направление падения луча равна \(A_{FEP} \cos(\beta)\).

### 4.3 Эквивалентные представления мощности

Мощность, воспринимаемая ФЭП, может быть записана двумя эквивалентными способами:

**Способ 1: Через эффективную интенсивность и полную площадь**

\[P_{incident} = I_{effective} \cdot A_{FEP} = I_{FEP,optical} \cdot \cos(\beta) \cdot A_{FEP}\]

**Способ 2: Через падающую интенсивность и эффективную площадь**

\[P_{incident} = I_{FEP,optical} \cdot A_{eff} = I_{FEP,optical} \cdot A_{FEP} \cdot \cos(\beta)\]

Оба способа дают одинаковый результат. Используется **Способ 1** для ясности: интенсивность уже содержит фактор \(\cos(\beta)\), поэтому площадь остается полной \(A_{FEP}\).

## 5. Расчет выходной мощности ФЭП

### 5.1 Модель ФЭП с постоянным КПД

ФЭП преобразует падающую солнечную энергию в электрическую энергию с постоянным коэффициентом полезного действия (КПД):

\[\eta_{FEP} = \text{const}\]

где \(\eta_{FEP}\) — КПД фотоэлектрической панели (задаваемый параметр, например 0.18 для кремниевых панелей).

### 5.2 Мощность, падающая на ФЭП

Мощность солнечного излучения, действительно воспринимаемая панелью:

\[P_{incident}(\alpha) = I_{effective}(\alpha) \cdot A_{FEP}\]

где:
- \(I_{effective}(\alpha) = I_{FEP,optical} \cdot \cos(\beta(\alpha))\) — эффективная интенсивность, уже содержащая фактор закона косинусов
- \(A_{FEP}\) — полная геометрическая площадь панели

**Важно:** Здесь используется **полная площадь** \(A_{FEP}\), а не эффективная площадь \(A_{eff}\), потому что эффект закона косинусов уже учтен в интенсивности \(I_{effective}\).

### 5.3 Выходная электрическая мощность

Выходная электрическая мощность ФЭП:

\[P_{out}(\alpha) = P_{incident}(\alpha) \cdot \eta_{FEP} = I_{effective}(\alpha) \cdot A_{FEP} \cdot \eta_{FEP}\]

Подставляя полное выражение для эффективной интенсивности:

\[P_{out}(\alpha) = I_0 \prod_{k=1}^{2K} T_k(\theta_k(\alpha)) \cdot M \cdot \cos(\beta(\alpha)) \cdot A_{FEP} \cdot \eta_{FEP}\]

## 6. Полная модель: зависимость выходной мощности от угла падения \(\alpha\)

### 6.1 Алгоритм расчета (детальный)

**Шаг 1:** Задать угол падения \(\alpha\), исходную интенсивность \(I_0\), параметры линз (фокусные расстояния \(f_i\), радиусы кривизны \(R_{1i}, R_{2i}\), толщины \(d_i\)), расстояния между линзами, показатели преломления.

**Шаг 2:** Построить матрицу ABCD полной оптической системы:

\[M_{total} = \prod_{i=1}^{K} \left[ M_{prop,i} \cdot M_{lens,i} \right]\]

где:
- \(M_{lens,i}\) — матрица i-й линзы
- \(M_{prop,i}\) — матрица распространения на расстояние до следующей линзы

**Шаг 3:** Определить выходной угол \(\beta(\alpha)\) через матричное описание:

\[\begin{pmatrix} y_{out} \\ \beta \end{pmatrix} = M_{total} \begin{pmatrix} y_{in} \\ \alpha \end{pmatrix}\]

где \(y_{in}\) и \(y_{out}\) — поперечное положение луча на входе и выходе системы.

**Шаг 4:** Рекурсивно применить закон Снеллиуса для каждой поверхности каждой линзы, отслеживая углы падения \(\theta_k(\alpha)\).

**Шаг 5:** Вычислить коэффициент пропускания для каждой поверхности:
\[T_k(\theta_k) = 1 - R_k(\theta_k)\]

где \(R_k\) вычисляется по формуле Френеля.

**Шаг 6:** Определить интенсивность после системы линз:
\[I_{optical} = I_0 \prod_{k} T_k\]

**Шаг 7:** Применить коэффициент концентрации/рассеяния:
\[I_{FEP,optical} = I_{optical} \cdot M\]

**Шаг 8:** Вычислить эффективную интенсивность с реальным углом падения на ФЭП:
\[I_{effective} = I_{FEP,optical} \cdot \cos(\beta(\alpha))\]

**Шаг 9:** Вычислить падающую мощность:
\[P_{incident} = I_{effective} \cdot A_{FEP}\]

**Шаг 10:** Вычислить выходную мощность с постоянным КПД:
\[P_{out}(\alpha) = P_{incident} \cdot \eta_{FEP}\]

### 6.2 Общее выражение для выходной мощности

Полная модель выходной мощности:

\[P_{out}(\alpha) = I_0 \cdot A_{FEP} \cdot \eta_{FEP} \cdot M \cdot \prod_{k=1}^{2K} T_k(\theta_k(\alpha)) \cdot \cos(\beta(\alpha))\]

где все величины являются функциями исходного угла падения \(\alpha\) и параметров оптической системы.

## 7. Ключевые физические эффекты в системе

### 7.1 Зависимость угла \(\beta\) от \(\alpha\)

Угол выходящего луча \(\beta\) не является простой функцией входящего угла \(\alpha\) для произвольной системы линз. Возможны следующие сценарии:

**Сценарий 1: Собирающая линза с ФЭП в фокусе**

При размещении ФЭП в фокальной плоскости собирающей линзы или системы линз параллельные лучи (\(\alpha = 0°\)) концентрируются в одной точке. Угол \(\beta\) может быть очень мал для любого входящего угла \(\alpha\) (линза "выравнивает" лучи).

**Сценарий 2: Параллельная конфигурация (телескоп)**

Если система линз совпадает с классической схемой Кеплера или Галилея (телескоп в параллельном раскладе), то \(\beta \approx \alpha\) с возможным смещением направления.

**Сценарий 3: Собирающая линза без фокуса на ФЭП**

Если ФЭП находится не в фокусе, то угол \(\beta\) зависит как от \(\alpha\), так и от расстояния до ФЭП. Лучи сходятся к фокусу и затем расходятся.

### 7.2 Влияние типа линзы на мощность

**Собирающие линзы:**
- Увеличивают угловое разрешение системы (сужают угол падения на ФЭП при определенной конфигурации)
- Концентрируют излучение (M > 1) если ФЭП расположена подходящим образом
- Могут уменьшить потери по закону косинусов, если \(\beta < \alpha\)

**Рассеивающие линзы:**
- Расширяют пучок (увеличивают \(\beta\))
- Рассеивают излучение (M < 1)
- Увеличивают потери по закону косинусов

### 7.3 Оптимизация системы

Для максимизации мощности, падающей на ФЭП, можно:
1. Выбрать фокусное расстояние линз так, чтобы \(\beta(\alpha)\) был минимален в рабочем диапазоне углов
2. Разместить ФЭП в оптимальной позиции относительно линз
3. Использовать комбинацию собирающих и рассеивающих линз для коррекции аберраций

## 8. Практическая реализация модели

### 8.1 Численный расчет

Для каждого угла \(\alpha \in [0°, 90°]\) с шагом \(\Delta\alpha\):

1. Построить матрицу ABCD оптической системы
2. Вычислить выходной угол \(\beta(\alpha)\)
3. Применить трассировку лучей через все линзы (закон Снеллиуса)
4. Вычислить произведение коэффициентов пропускания
5. Применить коэффициент концентрации
6. Вычислить эффективную интенсивность с реальным углом \(\beta\)
7. Вычислить падающую мощность на ФЭП
8. Вычислить выходную мощность через КПД
9. Записать результат P(α)

### 8.2 Специальные случаи

**Тонкая однолинзовая система:**

Для одной тонкой линзы с фокусным расстоянием \(f\) и лучом высотой \(y\), падающим под углом \(\alpha\):

\[\beta = \alpha - \frac{y}{f}\]

Если ФЭП находится на расстоянии \(z\) от линзы:

\[\beta(\alpha, z) = \alpha - \frac{y}{f} + \frac{y}{z}\]

## 9. Граничные условия

### 9.1 Нормальное падение \(\alpha = 0°\)

\[P_{out}(0°) = I_0 \cdot A_{FEP} \cdot \eta_{FEP} \cdot M \cdot \prod_{k=1}^{2K} T_k(0°) \cdot \cos(\beta(0°))\]

**Примечание:** \(\beta(0°)\) может быть не равен нулю, даже если \(\alpha = 0°\), в зависимости от конфигурации системы линз.

### 9.2 Скользящее падение \(\alpha \to 90°\)

\[\lim_{\alpha \to 90°} P_{out}(\alpha) \to 0\]

При углах, близких к 90°, выходная мощность стремится к нулю за счет полного отражения и условия \(\cos(\beta) \to 0\).

## 10. Заключение

Представленная математическая модель учитывает основные физические процессы в системе линз и ФЭП:

- **Преломление и направление лучей** в каждой линзе по закону Снеллиуса с учетом кривизны поверхностей
- **Матричное описание** оптической системы (ABCD-матрица) для определения выходного угла луча
- **Влияние фокусных расстояний** линз и расстояний между ними на выходной угол \(\beta(\alpha)\)
- **Оптические потери** на каждой поверхности раздела (коэффициенты Френеля)
- **Правильный учет закона косинусов** через эффективную интенсивность и полную площадь, без двойного учета геометрического эффекта
- **Постоянный КПД** фотоэлектрической панели

Модель позволяет получить зависимость выходной мощности \(P_{out}(\alpha)\) с необходимой точностью, учитывая оптические свойства всех линз и их влияние на направление лучей, что критически важно для проектирования систем солнечных панелей в космических аппаратах.
